# 변수의 타입

- 기본형과 참조형

  - 기본형: 실제 값(data)를 저장

    - 논리형(boolean)-1byte, 문자형(char)-2byte, 정수형(byte-1byte ,short-2byte,int-4byte, long-8byte),실수형(float-4byte, long-8byte)
    - int형의 경우 4byte(32bit)이므로 -2의31승 ~ 2의31승-1의 범위를 가짐.즉 약 20억

  - 참조형: 주소를 저장.

    참조형 변수는 null 또는 객체의 주소를 값으로 가짐.(4byte)

# 상수와 리터럴

- 상수

변수와 마찬가지로 '값을 저장할 수 있는 공간'이지만, 한번 값을 저장하면 다른 값으로 변경할 수 없음

상수는 반드시 선언과 동시에 초기화해줘야 함.

```java
final int MAX_SPEED; //에러
final int MAX_SPEED = 100; //ok
```

- 참고로 spring에서의 final- 의존성주입

  - *뇌피셜인데 맞는지..?*

    아래는 스파르타코딩-2주차 예제입니다. CourseRepository는 final로 선언되었으므로 초기화가 필요.근데 이미 CourseRepository 는 ioc에 의해 메모리에 등록됨. 그래서 생성자통해 초기화 함.

    ```java
    @RequiredArgsConstructor
    @Service // 스프링에게 이 클래스는 서비스임을 명시
    public class CourseService {
    
        // final: 서비스에게 꼭 필요한 녀석임을 명시
        private final CourseRepository courseRepository;
    
    		//public CourseService(CourseRepository courseRepository) {
        //    this.courseRepository = courseRepository;
        //}
    ```

- 리터럴

원래는 12, 'A', 3.14 이런게 '상수'인데, 프로그래밍에서는 상수를 '값을 저장하면 변경할 수 없는 공간'으로 정의하였기에 이와 구분하기 위해 다른 이름으로 부름.

```java
int year = 2014; //year는 변수, 2014는 리터럴
final int MAX_VALUE = 100; // MAX_VALUE는 상수, 100은 리터럴
```

- 리터럴 타입과 접미사

  정수형: 없으면 int, long일 경우엔 L

  8진수: 접두사 0,

  16진수: 접두사 0x

  실수형: 없으면 double, d는 double, f는 float

- 타입이 불일치

  저장범위가 넓은 타입에 좁은 타입의 값을 저장가능. 그반대는 불가능

  ```java
  int i = 'A'; //ok  4바이트에 2바이트
  long i = 123; //ok 8바이트에 4바이트
  double d = 3.14f; // 8바이트에 4바이트
  ```

# 형변환

- 변수 또는 상수의 타입을 다른 타입으로 변환하는 것
- boolean을 제외한 나머지 7개 기본형은 서로 형변환이 가능하다
- 기본형과 참조형은 서로 형변환 불가
- 서로 다른 타입의 변수간의 연산은 형변환 하는것이 원칙이지만, 값의 범위가 작은 타입에서 큰타입으로의 형변환은 생략가능

```java
double d = 85.4;
int score = (int)d;
===========위처럼 하면
score에는 85만 저장됨
```

- 자동형변환(타입 프로모션)

  컴파일러가 자동적으로 해줌. 표현범위가 더 넓은 쪽으로.

  ```java
  byte b = 10;
  int i = b; //자동으로 타입변환
  ```

------

# 변수의 종류

```jsx
{
	int iv; //인스턴스변수
	static int cv; //클래스 변수(=static 변수)
	
	void method(){  //----메서드영역----
		int lv = 0; //지역변수
	}
}
```

- 생성시기
  - 클래스변수: 클래스가 메모리에 올라갔을 때 //소멸:프로그램 종료될 때
  - 인스턴스 변수: 인스턴스가 생성되었을 때(new)
  - 지역변수 : 변수 선언문이 수행되었을 때. // 소멸: 메서드 종료되면 소멸됨. for문이나 while문 블럭안에 생성된 지역변수는 {}끝나면 소멸됨

### JVM 메모리구조

응용프로그램이 실행되면 jvm은 시스템으로부터 메모리를 할당받고, 이 메모리를 용도에 따라 나눠 관리함.

각 변수 종류마다 저장되는 메모리의 위치가 달라지므로 아는게 중요.

- 메서드영역(=클래스영역)

  클래스파일(.class)을 읽어 분석하여 클래스에 대한 정보(클래스데이터)를 이곳에 저장함.즉, 바이트코드가 로드되는 곳이다. (=클래스 로딩이 이루어진다).

  클래스 로딩이 이뤄지는 이유: 어떤 메소드가 호출되기 위해선 일단 그 메소드를 가지고 있는 클래스 파일이 메모리에 로딩되어있어야 하기 때문임.

  이때, 클래스의 클래스변수도 이 영역에 함께 생성.

- 힙

  인스턴스가 생성되는 공간. 인스턴스변수들이 생성되는 공간임

- 콜스택(=스택영역)

  메서드를 위한 메모리공간. 메서드가 작업을 수행하는 동안 지역변수(매개변수 포함)등과 연산의 중간결과 등을 저장하는데 사용됨. 메서드 끝나면 이 공간은 반환됨

→ 주의:

1. 클래스변수(static변수)는 인스턴스를 생성하지 않아도 사용가능
2. 클래스메서드(static메서드)는 인스턴스 변수를 사용할수 없음

------

# 변수의 초기화

멤버변수(인스턴스변수)는 초기화를 하지 않아도 자동적으로 변수의 자료형에 맞는 기본값으로 초기화됨. 그러나 지역변수는 사용하기 전에 반드시 초기화를 해야함.

```java
class Test{
		int x;     //인스턴스변수 
		int y = x; //인스턴스변수
		void method(){
			int i;    //지역변수..에러
			int j = i;   //지역변수..에러
		}
}
```

# 멤버변수의 초기화 방법-3가지

지역변수와 달리 멤버변수는 여러가지 방법이 있음

1. 명시적 초기화
2. 생성자
3. 초기화블럭
   1. 인스턴스 초기화블럭: 인스턴스변수를 초기화하는데 사용
   2. 클래스 초기화 블럭: 클래스변수 초기화하는데 사용

- 명시적 초기화

  가장 기본이고 간단해서 우선적으로 고려되어야 함

  ```java
  class Car(){
  	int door = 4;
  	Engine e = new Engine();
  }
  ```

- 초기화블럭

  - 인스턴스블럭은 언제쓰나? 모든 생성자에 공통으로 수행되어야 하는 문장들이 있을때.

  ```java
  Car(){
  	count++;
  	serialNo = count;
  	color = "white"
  	gearType = "Auto";
  }
  
  Car(String color, String gearType){
  	count++;
  	serialNo = count;
  	this.color = color;
  	this.gearType = gearType;
  }
  
  ====================================================
  =>위 코드가 아래처럼 간결해짐. 객체지향적으로 바뀜
  {
  	count++;
  	serialNo = count;
  }
  Car(){
  	color = "white"
  	gearType = "Auto";
  }
  
  Car(String color, String gearType){
  	this.color = color;
  	this.gearType = gearType;
  }
  ```

  - 클래스 초기화블럭

  ```java
  static{여기에 쓰면 됨}
  ```

  구체적인 사례는 모르겠지만(*본 적이 별로 없..*), main메소드가 실행되기전에 클래스 자체에서 실행해야 할 문장들을 적기 위함임.

  - 순서정리:

  클래스 초기화블럭은 클래스가 메모리에 로딩될때 처음에 딱 한번만 실행됨.

  인스턴스 초기화블럭은 생성자와 같이 인스턴스를 생성할때마다 실행되는데, 생성자보다 인스턴스 초기화블럭이 먼저 실행됨.